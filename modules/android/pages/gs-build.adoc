= Build and Run
:page-aliases: start/java-android-gs-build.adoc
:page-edition: {release}
:page-status: {prerelease}
:page-role:
:description: Build and run a starter app to validate your install of Couchbase Lite on Android
:keywords: edge nosql api android java

:url-getting-started-ktx: https://github.com/couchbase/docs-couchbase-lite/tree/release/3.0/modules/android/examples/getstarted[Kotlin]
:url-getting-started-jvm: https://github.com/couchbase/docs-couchbase-lite/tree/release/3.0/modules/android/examples/getstarted-java[Java]


// DO NOT EDIT
include::partial$_std-cbl-hdr-android.adoc[]

:param-abstract: This content provides sample code and instructions that enable you to test your Couchbase Lite for {param-name} installation.
include::{root-partials}block-abstract.adoc[]
// include::{root-partials}block-related-get-started.adoc[]
// DO NOT EDIT

// :ziputils: ROOT:example$/java-android/app/src/main/java/com/couchbase/code_snippets/ZipUtils.java
== Introduction

The Getting Started app is a very basic Android app comprising a simple activity, which runs a set of Couchbase Lite CRUD functions, logging progress and output.

You can access the `GettingStarted` project on github here: +
{url-getting-started-ktx} |  {url-getting-started-jvm}

== Quick Steps

====
. Get the project and open it in Android Studio: {url-getting-started-ktx} |  {url-getting-started-jvm}
. Build it
. Run it
+
Android Studio's Logcat panel will show `INFO` output similar to that in <<img-output>>:
. That's it.
====

If you had problems, or just want more information on the app, there's more below.

Those errors at the end of the run?
They're because no Sync Gateway was running.
That's optional code -- see below.
Comment-it-out or remove it if you aren't planning on running {sgw-te}.

[#img-output]
.Logcat Output from Android Studio
image::getstarted-output-ktx.png[,600]


== Getting Started App
The Getting Started app shows examples of the essential Couchbase for Android CRUD operations, including:

* Create database
* Create and save a document
* Retrieve a document
* Update a document
* Query documents
* Configure a replication
* Initiate a replication

Whilst no exemplar of a real application, it will give you a good idea how to get started using Couchbase Lite.

== Add the App to Your Own Project

. Create a new 'empty activity' project
 in Android Studio
. Open the `MainActivity`
. Delete the autogenerated content
. Paste-in the code show in <<ex-test-code>>.


.Sample code to test install
[#ex-test-code]
[{tabs}]
=====

Kotlin::
+
--
[source, Kotlin]
----
include::example$getstarted/app/src/main/java/com/example/getstarted_ktx/MainActivity.kt[tag="getting-started"]
----
--

Java::
+
--
[source, Java]
----
include::example$GetStartedjava/app/src/main/java/com/example/getstarted_java/MainActivity.java[tag="getting-started"]
----
--

=====
<.> Create a database
<.> Create a mutable document
<.> Save document to database
<.> Retrieve the document as mutable and change the `language` to `Java` and save it
<.> Retrieve document as immutable and log it ID
<.> Query the database output count and id to log
<.> Optionally, initiate a replication


// :param-tags: getting-started
// include::{root-partials}_block_tabbed_code_example.adoc[]
// :param-tags!:

Build and run.
You should see the document ID and property printed to the console.
The document was successfully persisted to the database.


== Snags and Pitfalls

Mostly around Gradle and versions.
You may find you need to change the prject settings to use Java 11 for instance.

Using this with Sync Gateway and Couchbase Server requires you have working versions of both .

Configuration details for this will be added to the project and this content page prior to 3.0 GA.


See also -- {xref-sgw-pg-install}


== Minification
An application that enables minification must ensure that certain pieces of Couchbase Lite library code are not changed -- see <<ruleset>> for a near-minimal rule set that retains the needed code:

[#ruleset]
.Ruleset
====
[source, {source-language}]
----
-keep class com.couchbase.lite.ConnectionStatus { <init>(...); }
-keep class com.couchbase.lite.LiteCoreException { static <methods>; }
-keep class com.couchbase.lite.internal.core.C4* {
    static <methods>;
    <fields>;
    <init>(...);
 }
----

====




include::{root-partials}block-related-content-start.adoc[]
