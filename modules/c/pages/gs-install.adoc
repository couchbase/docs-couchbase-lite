= Install Couchbase Lite for C
:page-aliases: clang:gs-install.adoc
:page-edition: {release}
:page-status: {prerelease}
:page-role:
:description: Installing Couchbase Lite for C
:keywords: edge nosql api

// BEGIN -- DO NOT EDIT
include::partial$_std-cbl-hdr-c.adoc[]

:param-abstract!:
include::{root-partials}block-abstract.adoc[]
// END -- DO NOT EDIT

// tag::installation[]
:param-page: {page-relative-src-path}
include::{root-partials}_get-started-topic-group.adoc[]

ifndef::bash-header[:bash-header: pass:q,a[source, bash, subs="attributes+", "macros+"]]

ifeval::["{prerelease}"=="BETA"]
:is-beta:
endif::[]
// :this-release: {version-full}


:install-closure: pass:q,a[At this point you are ready to start building the xref:gs-build.adoc[Getting Started] app, or doing your own thing with _Couchbase Lite for C_]

:download-path: {url-downloads-mobile}
:beta-url: https://packages.couchbase.com/releases/couchbase-lite-c/{version-full}/

:release-dir-ee: pass:q,a[libcblite-{version-full}]
:release-dir: pass:q,a[libcblite-community-{version-full}]
:release-dir-dev-ee: pass:q,a[libcblite-dev-{version-full}]
:release-dir-dev: pass:q,a[libcblite-dev-community-{version-full}]

:release-dir-ee-include: pass:q,a[{release-dir-ee}/include/]
:release-dir-ee-lib: pass:q,a[{release-dir-ee}/lib/]
:release-dir-include: pass:q,a[{release-dir}/include/]
:release-dir-lib: pass:q,a[{release-dir}/lib/]
:release-dirs-include: pass:q,a[`{release-dir-include}` or `{release-dir-ee-include}`]
:release-dirs-lib: pass:q,a[`{release-dir-lib}` or `{release-dir-ee-lib}`]
:release-dirs: pass:q,a[`{release-dir}` or `{release-dir-ee}`]




[#lbl-get-binaries]
== Download
_Couchbase Lite for C {version-full}_ is available for all supported platforms -- see: <<lbl-beta-platforms>>.

You can obtain the downloads here:

* _Android_, _iOS_ and _Windows_ -- {downloads-mobile--xref}.
* _Linux_ and _macOS_ -- <<tbl-beta-downloads-ee>>

The binary release download comprises a root directory ({release-dirs}), which contains:

* For Linux, Windows and Mac OS:

** `lib` --  the core library binaries

** `include` --  the header files for _inclusion_

** `bin` -- the Couchbase Lite for C `.dll` files (Microsoft{nbsp} Windows-only) .

* For iOS, an xcframework.

* For Android, a _ready-to-adapt_, skeleton application project.

:barsep: pass:q,a[ {nbsp}|{nbsp} ]

For install instructions, see: +
<<lbl-android>> {barsep}
<<lbl-apt, Install for Linux (APT)>> {barsep}
<<lbl-debt, Install for Linux (.deb)>> {barsep}
<<lbl-macos>> {barsep}
<<lbl-ios>> {barsep}
<<lbl-windows>>


[#lbl-linux]
== Install for Linux

[#lbl-apt]
=== Using APT

:url-apt-pkg-file: couchbase-release-1.0-noarch.deb
:url-apt-pkg:  pass:q,a[https://packages.couchbase.com/releases/couchbase-release/{url-apt-pkg-file}]

Using the Advanced Package Tool (apt) is the easiest way to install {cbl-t} on Ubuntu and Debian platforms.
Just download the meta package that _apt_ requires to automatically get and install {cbl-t}, including any dependencies.

. Download the meta package
+
[{tabs}]
=====

curl::
+
--
[{bash-header}]
----
curl -O {url-apt-pkg}
----
--

wget::
+
--
[{bash-header}]
----
wget {url-apt-pkg}
----
--
=====

. Install the meta package
+
[{tabs}]
=====

apt::
+
--
[{bash-header}]
----
sudo apt install ./{url-apt-pkg-file}
----
--

dpkg::
+
--
[{bash-header}]
----
sudo dpkg -i ./{url-apt-pkg-file}
----
--
=====

. Edit meta package list +
NOTE: This step is required only for the BETA release

+
Locate and edit the downloaded file `/etc/apt/sources.list.d/couchbase.list`
+
.Sample file contents
====
Here is an example of the `/etc/apt/sources.list.d/couchbase.list` file. The contents may differ slightly depending upon your Linux distro.


[{bash-header}]
----
deb [ arch=amd64 ] http://packages.couchbase.com/releases/couchbase-server/enterprise/deb/ focal focal/main
deb [ arch=amd64 ] http://packages.couchbase.com/releases/couchbase-server/community/deb/ focal focal/main
deb http://packages.couchbase.com/releases/couchbase-lite-repo/enterprise/deb/ focal focal/main
deb http://packages.couchbase.com/releases/couchbase-lite-repo/community/deb/ focal focal/main
# deb [ arch=amd64 ] http://beta-packages.couchbase.com/releases/couchbase-server/enterprise/deb/ focal focal/main
# deb [ arch=amd64 ] http://beta-packages.couchbase.com/releases/couchbase-server/community/deb/ focal focal/main
<.>
# deb http://beta-packages.couchbase.com/releases/couchbase-lite-repo/enterprise/deb/ focal focal/main
# deb http://beta-packages.couchbase.com/releases/couchbase-lite-repo/community/deb/ focal focal/main
----
<.> Uncomment the two _beta-packages_ lines containing `couchbase-lite` in the URL.
====

. Update the local package database
+
[{bash-header}]
----
sudo apt update
----

. Install the required release package(s)
+
[{tabs}]
=====
Enterprise::
+
--
.Runtime Only
[{bash-header}]
----
sudo apt install libcblite
----
.Development
[{bash-header}]
----
sudo apt install libcblite-dev
----
--

Community::
+
--
.Runtime Only
[{bash-header}]
----
sudo apt install libcblite-community
----
.Development
[{bash-header}]
----
sudo apt install libcblite-dev-community
----
--
=====

That's it.
{install-closure}


[#lbl-deb]
=== Using .deb Package

Use your package manager to install from a local `.deb` file.

. Just `wget` the appropriate `.deb` package  -- see <<tbl-beta-downloads-ee>>  for a BETA package URL.

. Install the package and its dependency, using `apt install`

** For community version:
+
[{bash-header}]
----

sudo apt install ./{release-dir}

sudo apt install ./{release-dir-dev}

----

** For enterprise version:
+
[{bash-header}]
----
sudo apt install ./{release-dir-ee}

sudo apt install ./{release-dir-dev-ee}

----

. That's it. +
You just need to pass the `-lcblite` command-line flag to the compiler when you build.

{install-closure}

// [#lbl-man]
// === Manually

// ifdef::is-beta[NOTE: These manual steps will not be needed beyond this BETA stage]

// [#lbl-linux-steps]
// . Install dependencies
// +
// Users of `.zip` downloads will need to use their package manager to install the following dependencies: `libatomic1`, `libicu` footnote:[Use whichever version ships with your linux distro] and `zlib1g`.
// +
// For example to install for ARM32 on ARM64, you might do:
// +
// [{bash-header}]
// ----
// sudo dpkg --add-architecture armhf
// sudo apt install -y libatomic1:armhf libicu57:armhf zlib1g:armhf // <.>
// ----
// <.> This example uses Debian{nbsp}9 libicu version; you should use the appropriate version for your distro.

// . *Download* and *Unpack* the binary release -- see: {downloads-mobile--xref}

// . Copy {release-dirs} to an appropriate location, for example `/usr/`

// . Confirm that `LD_LIBRARY_PATH` contains the path to either
// {release-dirs-lib}

// . Add the appropriate {release-dirs-lib} path to your
//  compiler library search path (`-L`)

// . Add the appropriate {release-dirs-include} path to your compiler's include path (`-I`)

// . Link with the binaries library using `-lcblite`

// {install-closure}

// If you are familiar with _CMake_, then you can use this as a method of creating cross-platform projects; including Couchbase Lite itself.
// As a convenience, the release package includes a _CMake_ file in `lib/cmake/CouchbaseLite`

[#lbl-windows]
== Install for Windows
To install the Couchbase for C libraries on Windows from a downloaded release binary:

[#lbl-windows-steps]
. Download and extract the release package -- see:  {downloads-mobile--xref}

. From within the root directory, {release-dir}, deploy the `lib`, `include` and `bin` libraries to a location accessible to your compiler.

. Within  _Visual Studio_:
.. *Create* a new C++ project
+
Be sure to select x64 for 64-bit builds
.. Within *Project Properties* -> *C++ directories* -> *Library Directories*, *Add* `<path-to-deployed-directories>/lib`
.. Within *Project Properties* -> *C++ directories* -> *Include Directories*, *Add* `<path-to-deployed-directories>/include`
.. Within *Project Properties* -> *Linker* -> *Input* -> *Additional Dependencies*, *Add* `cblite.lib`
. *Copy* `<path-to-deployed-directories>/bin/cblite.dll` to your build location
+
Couchbase Lite for C does not have any preferred installation path for the `.dll`.
It is up to you to determine where best to place it so it is available during execution, though copying to a location on the system path is not recommended on Windows


[#lbl-macos]
== Install for macOS
To install the Couchbase for C libraries on macOS from a downloaded release package:

CAUTION: Direct access from Swift to Couchbase Lite for C is not possible in this *3.0.0 (beta)* release.
This will be available in the next release.

[#lbl-mac-steps]
. Download and extract the release package here -- <<tbl-beta-downloads-ee>>.
. Optionally ... From within the root directory, {release-dir}, *Copy* the `include` and `lib` directories to `/usr/local/`
. Within  _Xcode_:
.. *Create* a new project
.. *Add* `<path/to>/include` to the project's _Header Search Path_
.. *Add* `<path/to>/lib` to the project's _Library Search Path_
.. *Drag* `libcblite.3.dylib` into your Xcode project, within the dialog:
... *Select* _Create Directory References If Needed_
... *Check* the correct target is selected

{install-closure}

[#lbl-ios]
== Install for iOS
CAUTION: Direct access from Swift to Couchbase Lite for C is not possible in this *3.0.0 (beta)*  release.
This will be available in the next release.

To install the Couchbase for C libraries on iOS from a downloaded release package:

[#lbl-mac-steps]

. Download and extract the release package here -- {downloads-mobile--xref}.
. *Drag* `CouchbaseLite.xcframework` into your Xcode project, then within the dialog:
... *Select* _Create Directory References If Needed_
... *Check* the correct target is selected

{install-closure}

If you encounter a build error -- Include of non-modular header inside framework module -- You may need to change the build setting
`allow non-modular includes in framework module` to `Yes`.


[#lbl-android]
== Install for Android
This install assumes use of the _Android Studio_ IDE.
In addition to the Couchbase Lite for C download you also require the following tool chain dependencies, all installable from within _Android Studio_ if necessary:

* CMake 3.18.1
* NDK 21.4.7075529
* Build tools 30.0.2

In this instance the release comprises a _ready to adapt_ application project.

. *Download* and *Unpack* the binary release here -- {downloads-mobile--xref}

. Within _Android Studio_, select and open the project folder (within the {release-dirs} folder)

. menu:Tools[SDK Manager > SDK Tools]

. Check the above dependencies are installed, select any that are not +
 btn:[OK] to Continue

Once the install is finished, you can build and run this skeleton app.

{install-closure}


[#lbl-beta-platforms]
== Beta Platform Availability

:not-fullpage:
include::{root-partials}supported-versions.adoc[tag={param-module}]
:not-fullpage!:


== Beta Download Links
:not-fullpage:
include::partial$betadownloads.adoc[]
:not-fullpage±:


include::{root-partials}block-related-content-start.adoc[]
