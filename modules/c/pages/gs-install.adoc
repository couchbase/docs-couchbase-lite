= Install Couchbase Lite for C
:page-aliases: clang:gs-install.adoc
:page-edition: {release}
:page-status: {prerelease}
:page-role:
:description: Installing Couchbase Lite for C
:keywords: edge nosql api

// BEGIN -- DO NOT EDIT
include::partial$_std-cbl-hdr-c.adoc[]

:param-abstract!:
include::{root-partials}block-abstract.adoc[]
// END -- DO NOT EDIT

// tag::installation[]
:param-page: {page-relative-src-path}
include::{root-partials}_get-started-topic-group.adoc[]


ifeval::["{prerelease}"=="BETA"]
:is-beta:
endif::[]
:this-release: 3.0.0-beta01


:install-closure: pass:q,a[At this point you are ready to start building the xref:gs-build.adoc[Getting Started] app.]

:download-path: {url-cb-downloads}
:beta-url: https://packages.couchbase.com/releases/couchbase-lite-c/{this-release}/

:release-dir-ee: pass:q,a[libcblite-{this-release}]
:release-dir: pass:q,a[libcblite-community-{this-release}]
:release-dir-dev-ee: pass:q,a[libcblite-dev-{this-release}]
:release-dir-dev: pass:q,a[libcblite-dev-community-{this-release}]

:release-dir-ee-include: pass:q,a[{release-dir-ee}/include/]
:release-dir-ee-lib: pass:q,a[{release-dir-ee}/lib/]
:release-dir-include: pass:q,a[{release-dir}/include/]
:release-dir-lib: pass:q,a[{release-dir}/lib/]
:release-dirs-include: pass:q,a[`{release-dir-include}` or `{release-dir-ee-include}`]
:release-dirs-lib: pass:q,a[`{release-dir-lib}` or `{release-dir-ee-lib}`]
:release-dirs: pass:q,a[`{release-dir}` or `{release-dir-ee}`]


== Introduction

_Couchbase Lite for C {this-release}_ is available for all supported platorms -- see: <<lbl-beta-platforms>>.
You can obtain the downloads here <<tbl-beta-downloads-ee>> .

The binary release download comprises a root directory ({release-dirs}), which contains:

* For Linux, Windows and Mac OS:

** `lib` --  the core library binaries

** `include` --  the header files for _inclusion_

** `bin` -- the Couchbase Lite for C `.dll` files (Microsoft{nbsp} Windows-only) .

* For iOS, an xcframework.

* For Android, a _ready-to-adapt_, skeleton application project.

== Linux

=== Linux .deb package

Use your package manager to install from a local `.deb` file.

. Just `wget` the appropriate `.deb` package  -- see <<tbl-beta-downloads-ee>>  for a BETA package URL.

. Install the package and its dependency, using `apt install`

** For community version:
+
[source, bash, subs="attributes+, macros+"]
----

sudo apt install ./{release-dir}

sudo apt install ./{release-dir-dev}

----

** For enterprise version:
+
[source, bash, subs="normal"]
----
sudo apt install ./{release-dir-ee}

sudo apt install ./{release-dir-dev-ee}

----

. That's it. +
You just need to pass the `-lcblite` command-line flag to the compiler when you build.

{install-closure}

=== Linux (manual)

ifdef::is-beta[NOTE: These manual steps will not be needed beyond this BETA stage]

[#lbl-linux-steps]
. Install dependencies
+
Users of `.zip` downloads will need to use their package manager to install the following dependencies: `libatomic1`, `libicu57` and `zlib1g`.
+
For example to install for ARM32 on ARM64, you might do:
+
[source, bash, subs="normal"]
----
sudo dpkg --add-architecture armhf
sudo apt install -y libatomic1:armhf libicu57:armhf zlib1g:armhf
----

. *Download* and *Unpack* the binary release -- see: <<tbl-beta-downloads-ee>>

. Copy {release-dirs} to an appropriate location, for example `/usr/`

. Confirm that `LD_LIBRARY_PATH` contains the path to either
{release-dirs-lib}

. Add the appropriate {release-dirs-lib} path to your
 compiler library search path (`-L`)

. Add the appropriate {release-dirs-include} path to your compiler's include path (`-I`)

. Link with the binaries library using `-lcblite`

{install-closure}

If you are familiar with _CMake_, then you can use this as a method of creating cross-platform projects; including Couchbase Lite itself.
As a convenience, the release package includes a _CMake_ file in `lib/cmake/CouchbaseLite`


== Windows


To install the Couchbase for C libraries on Windows from a downloaded release binary:

[#lbl-windows-steps]
. Download and extract the release package -- see: <<tbl-beta-downloads-ee>>

. From within the root directory, {release-dir}, deploy the `lib`, `include` and `bin` libraries to a location accessible to your compiler.

. Within  _Visual Studio_:
.. *Create* a new C++ project
+
Be sure to select x64 for 64-bit builds
.. Within *Project Properties* -> *C++ directories* -> *Library Directories*, *Add* `<path-to-deployed-directories>/lib`
.. Within *Project Properties* -> *C++ directories* -> *Include Directories*, *Add* `<path-to-deployed-directories>/include`
.. Within *Project Properties* -> *Linker* -> *Input* -> *Additional Dependencies*, *Add* `cblite.lib`
. *Copy* `<path-to-deployed-directories>/bin/cblite.dll` to your build location
+
Couchbase Lite for C does not have any preferred installation path for the `.dll`.
It is up to you to determine where best to place it so it is available during execution, though copying to a location on the system path is not recommended on Windows


== Mac OS
To install the Couchbase for C libraries on Mac OS X from a downloaded release package:

CAUTION: Direct access from Swift to Couchbase Lite for C is not possible in this *3.0 beta01* release.
This will be available in the next release.

[#lbl-mac-steps]
. Download and extract the release package -- see: <<tbl-beta-downloads-ee>>
// codesign -sv <location>/lib/libcblite.3.dylib (note if you don't have an Apple developer account this won't work)
. Optionally ... From within the root directory, {release-dir}, *Copy* the `include` and `lib` directories to `/usr/local/`
. Within  _Xcode_:
.. *Create* a new project
.. *Add* `<path/to>/include` to the project's _Header Search Path_
.. *Add* `<path/to>/lib` to the project's _Library Search Path_
.. *Drag* `libcblite.3.dylib` into your Xcode project, within the dialog:
... *Select* _Create Directory References If Needed_
... *Check* the correct target is selected

{install-closure}

== iOS
CAUTION: Direct access from Swift to Couchbase Lite for C is not possible in this *3.0 beta01* release.
This will be available in the next release.

To install the Couchbase for C libraries on iOS from a downloaded release package:

[#lbl-mac-steps]
. Download and extract the release package -- see: <<tbl-beta-downloads-ee>>
. *Drag* `CouchbaseLite.xcframework` into your Xcode project, then within the dialog:
... *Select* _Create Directory References If Needed_
... *Check* the correct target is selected

{install-closure}

If you encounter a build error -- Include of non-modular header inside framework module -- You may need to change the build setting
`allow non-modular includes in framework module` to `Yes`.


== Android
This install assumes use of the _Android Studio_ IDE.
In addition to the Couchbase Lite for C download you also require the following tool chain dependencies, all installable from within _Android Studio_ if necessary:

* CMake 3.18.1
* NDK 21.4.7075529
* Build tools 30.0.2

In this instance the release comprises a _ready to adapt_ application project.

. *Download* and *Unpack* the binary release -- see: <<tbl-beta-downloads-ee>>

. Within _Android Studio_, select and open the project folder (within the {release-dirs} folder)

. menu:Tools[SDK Manager > SDK Tools]

. Check the above dependencies are installed, select any that are not +
 btn:[OK] to Continue

Once the install is finished, you can build and run this skeleton app.

{install-closure}


[#lbl-beta-platforms]
== Beta Platform Availability

:not-fullpage:
include::{root-partials}supported-versions.adoc[tag={param-module}]
:not-fullpage!:


== Beta Download Links
:not-fullpage:
include::partial$betadownloads.adoc[]
:not-fullpageÂ±:


include::{root-partials}block-related-content-start.adoc[]
