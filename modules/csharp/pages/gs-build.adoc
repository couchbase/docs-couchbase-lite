:docname: gs-build
:page-module: csharp
:page-relative-src-path: gs-build.adoc
:page-origin-url: https://github.com/couchbase/docs-couchbase-lite.git
:page-origin-start-path:
:page-origin-refname: antora-assembler-simplification
:page-origin-reftype: branch
:page-origin-refhash: (worktree)
[#csharp:gs-build:::]
=== Build and Run
:page-aliases: start/csharp-gs-build.adoc
:page-role:
:description: Build and run a starter app to validate your install of Couchbase Lite on C#
:keywords: mobile edge nosql api C# .net web-app device-app



// BEGIN -- inclusion -- {module-partials}_define_module_attributes.adoc
//  Usage:  Here we define module specific attributes. It is invoked during the compilation of a page,
//          making all attributes available for use on the page.
//  UsedBy: ROOT:partial$_std_cbl_hdr.adoc

// BEGIN::module page attributes
// :source-language: Java

// :snippet-p2psync-ws: {snippets-p2psync-ws--csharp}
// SET full maintenance version number

// VECTOR SEARCH attributes

// END::module page attributes


// BEGIN - Set attributes pointing to API references for this module


// Supporting Data Type Classes

// COLLECTION CLASSES


// DATABASE CLASSES



//Database.SAVE



//Database.DELETE


// deprecated 2.8
//
// :url-api-method-database-compact: https://docs.couchbase.com/mobile/{major}.{minor}.{maintenance-net}{empty}/couchbase-lite-net/api/Couchbase.Lite.Database.html#Couchbase_Lite_Database_Compact[Database.Compact()]





// links for documents pages

// :url-api-class-dictionary: https://docs.couchbase.com/mobile/{major}.{minor}.{maintenance-net}{empty}/couchbase-lite-net/api/Couchbase.Lite.DictionaryObject.html[property accessors]



// QUERY RELATED CLASSES and METHODS

// Result Classes and Methods






// Query class and methods

// Expression class and methods
// :url-api-method-expression-like: https://docs.couchbase.com/mobile/{major}.{minor}.{maintenance-net}{empty}/couchbase-lite-net/api/Couchbase.Lite.Query.IExpression.html#Couchbase_Lite_Query_IExpression_Like_Couchbase_Lite_Query_IExpression_

// ArrayFunction class and methods


// Function class and methods
//

// Where class and methods
//

// orderby class and methods
//

// GroupBy class and methods
//





// PEER-TO-PEER CLASSES

// URLENDPOINT CLASSES




// :url-api-references-tlsidentity-property: https://docs.couchbase.com/mobile/{major}.{minor}.{maintenance-net}{empty}/couchbase-lite-net/api/Couchbase.Lite.P2P.TLSIdentity.html#Couchbase_Lite_P2P_TLSIdentity_







// https://ibsoln.github.io/betasites/api/mobile/2.8.0/couchbase-lite-csharp/com/couchbase/lite/URLEndpointListenerConfiguration.html#setPort-int-




// :url-api-references-urlendpointconfiguration-initcfg: https://docs.couchbase.com/mobile/{major}.{minor}.{maintenance-net}{empty}/couchbase-lite-net/api/Couchbase.Lite.P2P.URLEndpointListenerConfiguration.html#Couchbase_Lite_P2P_URLEndpointListenerConfiguration_initWithConfig::[-initWithConfig:]
// :url-api-references-urlendpointconfiguration-init: https://docs.couchbase.com/mobile/{major}.{minor}.{maintenance-net}{empty}/couchbase-lite-net/api/Couchbase.Lite.P2P.URLEndpointListenerConfiguration.html#Couchbase_Lite_P2P_URLEndpointListenerConfiguration_init:[-init:]




// diag: Env+Module csharp


// AUTHENTICATORS




// REPLICATOR API CLASSES



// :url-api-references-replicator-abs: https://docs.couchbase.com/mobile/{major}.{minor}.{maintenance-net}{empty}/couchbase-lite-net/api/Couchbase.Lite.Sync.AbstractReplicator.html
// :url-api-class-replicator-abs: {url-api-references-replicator-abs}[AbstractReplicator]
// :url-api-properties-replicator-abs: {url-api-references-replicator-abs}#









//:url-api-property-replicator-status-activity: https://docs.couchbase.com/mobile/{major}.{minor}.{maintenance-net}{empty}/couchbase-lite-net/api/Couchbase.Lite.Sync.Replicator.html#s:18CouchbaseLitecsharp10ReplicatorC13ActivityLevelO


// REPLICATORSTATUS


// ReplicatorConfiguration API





// :url-api-prop-replicator-config-auth-get: https://docs.couchbase.com/mobile/{major}.{minor}.{maintenance-net}{empty}/couchbase-lite-net/api/Couchbase.Lite.Sync.ReplicatorConfiguration.html#Couchbase_Lite_Sync_ReplicatorConfiguration_getAuthenticator--[getAuthenticator]



// Begin Replicator Retry Config
// End Replicator Retry Config




// replaced
// replaced

// :url-api-enum-replicator-config-ServerCertificateVerificationMode: https://docs.couchbase.com/mobile/{major}.{minor}.{maintenance-net}{empty}/couchbase-lite-net/api/Couchbase.Lite.Sync.ReplicatorConfiguration.html{Enums/ServerCertificateVerificationMode.html[serverCertificateVerificationMode enum]
// // replaces ^^
// :url-api-prop-replicator-config-AcceptOnlySelfSignedServerCertificate: https://docs.couchbase.com/mobile/{major}.{minor}.{maintenance-net}{empty}/couchbase-lite-net/api/Couchbase.Lite.Sync.ReplicatorConfiguration.html#Couchbase_Lite_Sync_ReplicatorConfiguration_setAcceptOnlySelfSignedServerCertificate-boolean-[setAcceptOnlySelfSignedServerCertificate]





// Meta API




// BEGIN Logs and logging references








// END  Logs and logging references

// End -- API References attributes

// END - Set attributes pointing to API references for this module

// END -- inclusion -- csharp:partial$_define_module_attributes.adoc

// BEGIN::module page attributes
//:source-language: csharp
// :snippet-p2psync-ws: {snippets-p2psync-ws--csharp}

// END::Local page attributes

// DO NOT EDIT
[abstract]
--
Description -- _{description}_ +
_Abstract -- This content provides sample code and instructions that enable you to test your Couchbase Lite for csharp installation._ +
--
// include::ROOT:partial$block-related-get-started.adoc[]
// DO NOT EDIT

[discrete#csharp:gs-build:::starter-code]
==== Starter code

Open *Main.cs* in Visual Studio and copy the following code in the `main` method.
This snippet demonstrates how to run basic CRUD operations, a simple Query and running bi-directional replications with Sync Gateway.

[source, C#]
----

// using System;
// using Couchbase.Lite;
// using Couchbase.Lite.Query;
// using Couchbase.Lite.Sync;

// Get the database (and create it if it doesn't exist)
var database = new Database("mydb");
var collection = database.GetDefaultCollection();

// Create a new document (i.e. a record) in the database
var id = default(string);
using var createdDoc = new MutableDocument();
createdDoc.SetFloat("version", 2.0f)
    .SetString("type", "SDK");

// Save it to the database
collection.Save(createdDoc);
id = createdDoc.Id;

// Update a document
using var doc = collection.GetDocument(id);
using var mutableDoc = doc.ToMutable();
createdDoc.SetString("language", "C#");
collection.Save(createdDoc);

using var docAgain = collection.GetDocument(id);
Console.WriteLine($"Document ID :: {docAgain.Id}");
Console.WriteLine($"Learning {docAgain.GetString("language")}");


// Create a query to fetch documents of type SDK
// i.e. SELECT * FROM database WHERE type = "SDK"
using var query = QueryBuilder.Select(SelectResult.All())
    .From(DataSource.Collection(collection))
    .Where(Expression.Property("type").EqualTo(Expression.String("SDK")));

// Run the query
var result = query.Execute();
Console.WriteLine($"Number of rows :: {result.AllResults().Count}");

// Create replicator to push and pull changes to and from the cloud
var targetEndpoint = new URLEndpoint(new Uri("ws://localhost:4984/getting-started-db"));
var replConfig = new ReplicatorConfiguration(targetEndpoint);
replConfig.AddCollection(database.GetDefaultCollection());

// Add authentication
replConfig.Authenticator = new BasicAuthenticator("john", "pass");

// Create replicator (make sure to add an instance or static variable
// named _Replicator)
var replicator = new Replicator(replConfig);
replicator.AddChangeListener((sender, args) =>
{
    if (args.Status.Error != null) {
        Console.WriteLine($"Error :: {args.Status.Error}");
    }
});

replicator.Start();

// Later, stop and dispose the replicator *before* closing/disposing the database

----

Build and run.
You should see the document ID and property printed to the console.
The document was successfully persisted to the database.

See also -- xref:sync-gateway::get-started-install.adoc[Install Sync Gateway]

[discrete#csharp:gs-build:::building-with-vector-search]
===== Building With Vector Search

To build your Couchbase Lite application with Vector Search, you must add the following to your existing Couchbase Lite application:

. Add the Vector Search import statement
+
[source, csharp]
----

using Couchbase.Lite.Extensions;

----
+
. Load the extension.
+
[source, csharp]
----
// For Android applications
Extension.Load(new VectorSearchExtension(Context));

// For non-Android applications
Extension.Load(new VectorSearchExtension());

----

// DO NOT EDIT -- Footer Related Content Block

// inclusion
//:param-how: //:param-reference: reference-deploy




[discrete#csharp:gs-build:::related-content]
==== Related Content
++++
<div class="card-row three-column-row">
++++

[.column]
===== {empty}
.How to
* xref:csharp:p2psync-websocket-using-passive.adoc[Passive Peer]
* xref:csharp:p2psync-websocket-using-active.adoc[Active Peer]


.

[discrete.colum#csharp:gs-build:::-2n]
===== {empty}
.Concepts
* xref:csharp:landing-p2psync.adoc[Peer-to-Peer Sync]

* https://docs.couchbase.com/mobile/{major}.{minor}.{maintenance-net}{empty}/couchbase-lite-net[API References]

.


[.column]
// [.content]
[discrete#csharp:gs-build:::-3]
===== {empty}
.Community Resources ...
//* Community
https://forums.couchbase.com/c/mobile/14[Mobile Forum] |
https://blog.couchbase.com/[Blog] |
https://docs.couchbase.com/tutorials/[Tutorials]


.
xref:tutorials:cbl-p2p-sync-websockets:swift/cbl-p2p-sync-websockets.adoc[Getting Started with Peer-to-Peer Synchronization]




++++
</div>
++++

// DO NOT EDIT


