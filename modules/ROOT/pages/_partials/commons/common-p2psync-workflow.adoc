:this-module: {par-module}

== Overview


.Enterprise Edition only
IMPORTANT: Peer-to-Peer Synchronization is an https://www.couchbase.com/products/editions[Enterprise Edition] feature.
You must purchase the Enterprise License which includes official https://www.couchbase.com/support-policy[Couchbase Support] to use it in production (also see the https://www.couchbase.com/licensing-and-support-faq[FAQ]).

== Discovery

Automatic Device Discovery is out of scope for release.

You can implement service browsing and advertising using, for example a DNS-SD based framework such as Apple's Bonjour -- see
https://developer.apple.com/documentation/foundation/netservicebrowser[NetServiceBrowser]


You can see an example of this In action in our tutorial here: include-link-to-tutorial for this https://drive.google.com/file/d/1WD6JNvAgQIlB69zBOYJEK25aLlLXgB-m/view

== Setting up as a Passive Peer

image::ROOT:discovery.png[,800]

.Key Steps


* Passive
** Start Advertising

It's expected that completion of the discovery phase will resolve to a peer available for connection.



Use to start listening for changes on a specific database.

Client can instantiate any number of “URLEndpointListener” lnstances, each serving a different database.
There are no hard limits on number of instances other than practical limitations.

Having a listener on a database must not preclude the client from opening up replications to the other clients.

A passive client that is listening for connections via URLEndpointListener must be capable of actively opening up replications to other passive WebsocketMessageEndpointListener clients .
The active and passive connections initiated by a peer can be for the same database.


== Discovery

include::{root-partials}p2p-ws-peer-discovery.adoc[]

== Authentication

include::{root-partials}p2p-ws-peer-selection.adoc[]

=== Connection


=== Diconnection

include::{root-partials}p2p-ws-connection-teardown.adoc[]


