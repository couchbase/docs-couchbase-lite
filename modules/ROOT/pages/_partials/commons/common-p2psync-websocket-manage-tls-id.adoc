// common-p2psync-websocket-manage-tls-id.adoc
// Managing TLS Identities for P2P Sync over Websockets
//

// BEGIN CONTENT


// DO NOT EDIT
include::{root-partials}block-related-howto-p2psync-ws.adoc[]
include::{root-partials}block-abstract.adoc[]
// DO NOT EDIT

include::{root-partials}block-abstract.adoc[]

[.pane__frames]
== Overview
[.no-color]
.{empty}
*  This describes the configuration and management of TLS identities

[.narrow]
.Key Concepts
* API: {url-api-class-tlsidentity}
* {p2psync-websocket--xref}

== API References

You can find {url-api-references}[{param-title} API References] here.

== Creating TLS Identity

There are couple of options by which TLS Identity is created:

* You can use the <<anonymous-cert,anonymous self-signed cert>> auto-generated by Couchbase Lite
* You can <<importing-a-cert,import a cert>> to be bundled with the app and-or stored in the keychain

//include::{root-partials}p2p-api-tlsid-{param-platform}.adoc[tag=method-create]

== Use Anonymous Cert

Anonymous certification uses the self signed certificate auto-generated by Couchbase Lite when TLS is enabled, but no TLSIdentity is provided.

[source, {source-language}]
----

listenerConfig.disableTLS  = false // Use with anonymous self signed cert
listenerConfig.tlsIdentity = nil

----

== Import a Cert

Use the {url-api-class-tlsidentity} class's  {url-api-method-tls-identity-import} method to import a certificate that can be bundled with the app and-or added to the keychain.

. First check the keychain to see if the identity already exists
+
--
:param-tags: p2p-tlsid-check-keychain
include::{root-partials}_block_tabbed_code.adoc[]
:param-tags!:
--

. Check for an existing resource bundle
+
--
:param-tags: p2p-tlsid-check-bundled
include::{root-partials}_block_tabbed_code.adoc[]
:param-tags!:
--

. Import from an existing resource bundle
+
--
:param-tags: p2p-tlsid-import-from-bundled
include::{root-partials}_block_tabbed_code.adoc[]
:param-tags!:
--

. Store imported identity in keychain
+
--
:param-tags: p2p-tlsid-store-in-keychain
include::{root-partials}_block_tabbed_code.adoc[]
:param-tags!:

--

. Use keychain identity in config
+
--
:param-tags: p2p-tlsid-return-id-from-keychain
include::{root-partials}_block_tabbed_code.adoc[]
:param-tags!:
--


== Delete TLS Identity

// include::{root-partials}p2p-api-tlsid-{param-platform}.adoc[tag=method-delete]
:param-tags: p2p-tlsid-delete-id-from-keychain
include::{root-partials}_block_tabbed_code.adoc[]
:param-tags!:


// DO NOT EDIT OR REMOVE
include::{root-partials}block-related-content-p2psync.adoc[]
// DO NOT EDIT OR REMOVE
// END CONTENT